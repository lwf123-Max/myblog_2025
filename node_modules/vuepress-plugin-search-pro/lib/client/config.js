import{useRouteLocale as x,useSiteLocaleData as K,defineClientConfig as D}from"@vuepress/client";import{useDebounceFn as N,useEventListener as S,useScrollLock as U,onClickOutside as j}from"@vueuse/core";import{ref as p,computed as w,watch as d,provide as H,onMounted as g,onUnmounted as E,defineComponent as M,inject as T,h as a,shallowRef as A,nextTick as P,defineAsyncComponent as R}from"vue";import{startsWith as W,useLocaleConfig as m,checkIsMacOS as Y,checkIsIOS as $,checkIsiPad as F,useIsMobile as q}from"vuepress-shared/client";import{c as L,C as B,S as V}from"./closeIcon-sf_efdRb.js";import{d as _,e as I,u as z,s as Q,c as X,a as k,i as G}from"./index-JkSz3odU.js";import"./styles/search-box.scss";import"./styles/search-modal.scss";const J=(e,s=!1)=>{const l=p(0),r=w(()=>e.value[l.value]),t=()=>{l.value=l.value>0?l.value-1:e.value.length-1},n=()=>{l.value=l.value<e.value.length-1?l.value+1:0};return d(e,()=>{s||(l.value=0)}),{index:l,item:r,prev:t,next:n}},f=Symbol(__VUEPRESS_DEV__?"search-pro":""),Z=()=>{const e=p(!1);H(f,e)},ee=e=>e instanceof Element?document.activeElement===e&&(["TEXTAREA","SELECT","INPUT"].includes(e.tagName)||e.hasAttribute("contenteditable")):!1,ae=e=>_.some(s=>{const{key:l,ctrl:r=!1,shift:t=!1,alt:n=!1,meta:c=!1}=s;return l===e.key&&r===e.ctrlKey&&t===e.shiftKey&&n===e.altKey&&c===e.metaKey}),te='<svg width="15" height="15" aria-label="Enter key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M12 3.53088v3c0 1-1 2-2 2H4M7 11.53088l-3-3 3-3"></path></g></svg>',oe='<svg width="15" height="15" aria-label="Arrow down" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 3.5v8M10.5 8.5l-3 3-3-3"></path></g></svg>',le='<svg width="15" height="15" aria-label="Arrow up" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 11.5v-8M10.5 6.5l-3-3-3 3"></path></g></svg>',re='<svg width="15" height="15" aria-label="Escape key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993 0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016.8634 0 1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5c.032.5663-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864 0 1.6425 1.031 1.5443 2.2492h-2.956"></path></g></svg>',se=e=>{const s=p([]);if(I){const l=z(),r=x();g(()=>{const t=N(i=>{i?n({type:"suggest",query:i,locale:r.value,options:l}).then(h=>{s.value=h.length?W(h[0],i)&&!h[0].slice(i.length).includes(" ")?h:[i,...h]:[]}).catch(h=>{console.error(h)}):s.value=[]},Q.suggestDelay),{search:n,terminate:c}=X();d([e,r],()=>t(e.value),{immediate:!0}),E(()=>{c()})})}return{suggestions:s}},y=_[0];var ne=M({name:"SearchBox",setup(){const e=m(k),s=T(f),l=p(!1),r=w(()=>y?[(l.value?["⌃","⇧","⌥","⌘"]:["Ctrl","Shift","Alt","Win"]).filter((t,n)=>y[["ctrl","shift","alt","meta"][n]]),y.key.toUpperCase()]:null);return S("keydown",t=>{!s.value&&ae(t)&&!ee(t.target)&&(t.preventDefault(),s.value=!0)}),g(()=>{const{userAgent:t}=navigator;l.value=Y(t)||$(t)||F(t)}),()=>[a("button",{type:"button",class:"search-pro-button","aria-label":e.value.search,onClick:()=>{s.value=!0}},[a(L),a("div",{class:"search-pro-placeholder"},e.value.search),r.value?a("div",{class:"search-pro-key-hints"},r.value.map(t=>a("kbd",{class:"search-pro-key"},t))):null])]}});const ce=R({loader:()=>import("vuepress-plugin-search-pro/result"),loadingComponent:()=>{const e=m(k);return a(V,{hint:e.value.loading})}});var ue=M({name:"SearchModal",setup(){const e=T(f),s=K(),l=q(),r=m(k),t=p(""),{suggestions:n}=se(t),c=p(!1),{index:i,prev:h,next:O}=J(n),b=A(),C=A(),v=(o=i.value)=>{t.value=n.value[o],c.value=!1};return S("keydown",o=>{c.value?o.key==="ArrowUp"?h():o.key==="ArrowDown"?O():o.key==="Enter"?v():o.key==="Escape"&&(c.value=!1):o.key==="Escape"&&(e.value=!1)}),g(()=>{const o=U(document.body);d(e,async u=>{o.value=u,u&&(await P(),b.value?.focus())}),j(C,()=>{c.value=!1}),E(()=>{o.value=!1})}),()=>e.value?a("div",{class:"search-pro-modal-wrapper"},[a("div",{class:"search-pro-mask",onClick:()=>{e.value=!1,t.value=""}}),a("div",{class:"search-pro-modal"},[a("div",{class:"search-pro-box"},[a("form",[a("label",{for:"search-pro","aria-label":r.value.search},a(L)),a("input",{ref:b,type:"search",class:"search-pro-input",id:"search-pro",placeholder:r.value.placeholder,spellcheck:"false",autocapitalize:"off",autocomplete:"off",autocorrect:"off",name:`${s.value.title}-search`,value:t.value,"aria-controls":"search-pro-results",onKeydown:o=>{const{key:u}=o;n.value.length&&(u==="Tab"?(v(),o.preventDefault()):(u==="ArrowDown"||u==="ArrowUp"||u==="Escape")&&o.preventDefault())},onInput:({target:o})=>{t.value=o.value,c.value=!0,i.value=0}}),t.value?a("button",{type:"reset",class:"search-pro-clear-button",innerHTML:B,onClick:()=>{t.value=""}}):null,I&&c.value&&n.value.length?a("ul",{class:"search-pro-suggestions",ref:C},n.value.map((o,u)=>a("li",{class:["search-pro-suggestion",{active:u===i.value}],onClick:()=>{v(u)}},[a("kbd",{class:"search-pro-auto-complete",title:`Tab ${r.value.autocomplete}`},"Tab"),o]))):null]),a("button",{type:"button",class:"search-pro-close-button",onClick:()=>{e.value=!1,t.value=""}},r.value.cancel)]),a(ce,{query:t.value,isFocusing:!c.value,onClose:()=>{e.value=!1},onUpdateQuery:o=>{t.value=o}}),l.value?null:a("div",{class:"search-pro-hints"},[a("span",{class:"search-pro-hint"},[a("kbd",{innerHTML:te}),r.value.select]),a("span",{class:"search-pro-hint"},[a("kbd",{innerHTML:le}),a("kbd",{innerHTML:oe}),r.value.navigate]),a("span",{class:"search-pro-hint"},[a("kbd",{innerHTML:re}),r.value.exit])])])]):null}}),ie=D({enhance({app:e}){G(e),e.component("SearchBox",ne)},setup(){Z()},rootComponents:[ue]});export{ie as default};
//# sourceMappingURL=config.js.map
