---
title: 互斥锁
date: 2025-08-01
categories:
  - 小教程
tags:
  - 学习
  - 随笔

---

# C++互斥锁



两个线程同时读或写同一个变量需用到互斥锁

```
首先声明变量
	std::shared_mutex isStartTimer_mtx;
	bool isStartTimer;

// 若为纯写入：不要shared_lock ，用lock_guard<mutex>;若为纯读取无需加锁
        {
            std::shared_lock<std::shared_mutex> lck(msgCenter_ptr->isStartTimer_mtx); // 读取锁
            if(msgCenter_ptr->isStartTimer) {
                msgCenter_ptr->global_start_time = ros::Time::now();
                std::cout << "开始计时！" << std::endl;
                msgCenter_ptr->isStartTimer = false;
            }
        }

std::unique_lock<std::shared_mutex> lck(msgCenter_ptr->isStartTimer_mtx); // 写入锁
```

